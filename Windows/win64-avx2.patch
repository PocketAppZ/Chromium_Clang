diff --git a/build/config/compiler/BUILD.gn b/build/config/compiler/BUILD.gn
index 80bc79e5fb350..9da6ad66d12da 100644
--- a/build/config/compiler/BUILD.gn
+++ b/build/config/compiler/BUILD.gn
@@ -497,10 +497,10 @@ config("compiler") {
   # Linux/Android/Fuchsia common flags setup.
   # ---------------------------------
   if (is_linux || is_chromeos || is_android || is_fuchsia) {
-    asmflags += [ "-fPIC" ]
-    cflags += [ "-fPIC" ]
-    ldflags += [ "-fPIC" ]
-    rustflags += [ "-Crelocation-model=pic" ]
+    asmflags += [ "-fPIC", "-w" ]
+    cflags += [ "-fPIC", "-w" ]
+    ldflags += [ "-fPIC", "-w" ]
+    rustflags += [ "-Crelocation-model=pic", "-Awarnings", ]
 
     if (!is_clang) {
       # Use pipes for communicating between sub-processes. Faster.
@@ -636,9 +636,9 @@ config("compiler") {
 
     # TODO(crbug.com/1235145): Investigate why/if this should be needed.
     if (is_win) {
-      cflags += [ "/clang:-ffp-contract=off" ]
+      cflags += [ "/clang:-ffp-contract=fast" ]
     } else {
-      cflags += [ "-ffp-contract=off" ]
+      cflags += [ "-ffp-contract=fast" ]
     }
   }
 
@@ -1022,6 +1022,10 @@ config("compiler") {
     # For deterministic builds, keep the local machine's current working
     # directory from appearing in build outputs.
     "-Zremap-cwd-prefix=.",
+
+    "-Ctarget-cpu=haswell",
+    "-Ctarget-feature=+sse3,+ssse3,+sse4.1,+sse4.2,+avx,+avx2,+fma",
+    "-Cllvm-args=-fp-contract=fast",
   ]
 
   if (!is_win || force_rustc_color_output) {
@@ -1074,12 +1078,14 @@ config("compiler") {
 # building with ThinLTO, no optimization is performed in the link step.
 config("thinlto_optimize_default") {
   if (!is_debug && use_thin_lto && is_a_target_toolchain) {
-    lto_opt_level = 0
+    lto_opt_level = 3
 
     if (is_win) {
       ldflags = [ "/opt:lldlto=" + lto_opt_level ]
+      ldflags += [ "-opt:lldltocgo=" + lto_opt_level ]
     } else {
       ldflags = [ "-Wl,--lto-O" + lto_opt_level ]
+      ldflags += [ "-Wl,--lto-CGO" + lto_opt_level ]
     }
 
     if (toolchain_supports_rust_thin_lto) {
@@ -1105,15 +1111,17 @@ config("thinlto_optimize_default") {
 config("thinlto_optimize_max") {
   if (!is_debug && use_thin_lto && is_a_target_toolchain) {
     if (thin_lto_enable_optimizations) {
-      lto_opt_level = 2
+      lto_opt_level = 3
     } else {
-      lto_opt_level = 0
+      lto_opt_level = 3
     }
 
     if (is_win) {
       ldflags = [ "/opt:lldlto=" + lto_opt_level ]
+      ldflags += [ "-opt:lldltocgo=" + lto_opt_level ]
     } else {
       ldflags = [ "-Wl,--lto-O" + lto_opt_level ]
+      ldflags += [ "-Wl,--lto-CGO" + lto_opt_level ]
     }
 
     if (toolchain_supports_rust_thin_lto) {
@@ -1149,7 +1157,8 @@ config("compiler_cpu_abi") {
     if (current_cpu == "x64") {
       cflags += [
         "-m64",
-        "-msse3",
+        "-march=haswell",
+        "-msse3", "-mssse3", "-msse4.1", "-msse4.2", "-mavx", "-mavx2", "-mfma",
       ]
 
       # Minimum SIMD support for devices running lacros.
@@ -2269,6 +2278,71 @@ if (is_win) {
   }
   common_optimize_on_ldflags = []
 
+  common_optimize_on_cflags += [
+    "/clang:-freroll-loops",
+    "-mllvm", "-adce-remove-loops",
+    "-mllvm", "-aggressive-ext-opt",
+    "-mllvm", "-consthoist-gep",
+    "-mllvm", "-costmodel-reduxcost",
+    "-mllvm", "-enable-cse-in-irtranslator",
+    "-mllvm", "-enable-cse-in-legalizer",
+    "-mllvm", "-enable-deferred-spilling",
+    "-mllvm", "-enable-dfa-jump-thread",
+    "-mllvm", "-enable-gvn-hoist",
+    "-mllvm", "-enable-interleaved-mem-accesses",
+    "-mllvm", "-enable-masked-interleaved-mem-accesses",
+    "-mllvm", "-enable-ipra",
+    "-mllvm", "-enable-loadstore-runtime-interleave",
+    "-mllvm", "-enable-local-reassign",
+    "-mllvm", "-enable-loopinterchange",
+    "-mllvm", "-enable-loop-distribute",
+    "-mllvm", "-enable-loop-flatten",
+    "-mllvm", "-enable-loop-versioning-licm",
+    "-mllvm", "-enable-unroll-and-jam",
+    "-mllvm", "-exhaustive-register-search",
+    "-mllvm", "-inline-enable-cost-benefit-analysis",
+    "-mllvm", "-interleave-small-loop-scalar-reduction",
+    "-mllvm", "-loop-rotate-multi",
+    "-mllvm", "-misched=ilpmax",
+    "-mllvm", "-pre-RA-sched=list-ilp",
+    "-mllvm", "-scalar-evolution-use-expensive-range-sharpening",
+    "-mllvm", "-slp-vectorize-hor-store",
+    "-mllvm", "-unroll-runtime-multi-exit",
+    "-mllvm", "-vectorizer-maximize-bandwidth",
+  ]
+
+  common_optimize_on_ldflags += [
+    "-mllvm:-adce-remove-loops",
+    "-mllvm:-aggressive-ext-opt",
+    "-mllvm:-consthoist-gep",
+    "-mllvm:-costmodel-reduxcost",
+    "-mllvm:-enable-cse-in-irtranslator",
+    "-mllvm:-enable-cse-in-legalizer",
+    "-mllvm:-enable-deferred-spilling",
+    "-mllvm:-enable-dfa-jump-thread",
+    "-mllvm:-enable-gvn-hoist",
+    "-mllvm:-enable-interleaved-mem-accesses",
+    "-mllvm:-enable-masked-interleaved-mem-accesses",
+    "-mllvm:-enable-ipra",
+    "-mllvm:-enable-loadstore-runtime-interleave",
+    "-mllvm:-enable-local-reassign",
+    "-mllvm:-enable-loopinterchange",
+    "-mllvm:-enable-loop-distribute",
+    "-mllvm:-enable-loop-flatten",
+    "-mllvm:-enable-loop-versioning-licm",
+    "-mllvm:-enable-unroll-and-jam",
+    "-mllvm:-exhaustive-register-search",
+    "-mllvm:-inline-enable-cost-benefit-analysis",
+    "-mllvm:-interleave-small-loop-scalar-reduction",
+    "-mllvm:-loop-rotate-multi",
+    "-mllvm:-misched=ilpmax",
+    "-mllvm:-pre-RA-sched=list-ilp",
+    "-mllvm:-scalar-evolution-use-expensive-range-sharpening",
+    "-mllvm:-slp-vectorize-hor-store",
+    "-mllvm:-unroll-runtime-multi-exit",
+    "-mllvm:-vectorizer-maximize-bandwidth",
+  ]
+
   # /OPT:ICF is not desirable in Debug builds, since code-folding can result in
   # misleading symbols in stack traces.
   if (!is_debug && !is_component_build) {
@@ -2288,6 +2362,72 @@ if (is_win) {
   common_optimize_on_cflags = []
   common_optimize_on_ldflags = []
 
+  common_optimize_on_cflags += [
+    "-freroll-loops",
+    "-mllvm", "-adce-remove-loops",
+    "-mllvm", "-aggressive-ext-opt",
+    "-mllvm", "-consthoist-gep",
+    "-mllvm", "-costmodel-reduxcost",
+    "-mllvm", "-enable-cse-in-irtranslator",
+    "-mllvm", "-enable-cse-in-legalizer",
+    "-mllvm", "-enable-deferred-spilling",
+    "-mllvm", "-enable-dfa-jump-thread",
+    "-mllvm", "-enable-gvn-hoist",
+    "-mllvm", "-enable-interleaved-mem-accesses",
+    "-mllvm", "-enable-masked-interleaved-mem-accesses",
+    "-mllvm", "-enable-ipra",
+    "-mllvm", "-enable-loadstore-runtime-interleave",
+    "-mllvm", "-enable-local-reassign",
+    "-mllvm", "-enable-loopinterchange",
+    "-mllvm", "-enable-loop-distribute",
+    "-mllvm", "-enable-loop-flatten",
+    "-mllvm", "-enable-loop-versioning-licm",
+    "-mllvm", "-enable-unroll-and-jam",
+    "-mllvm", "-exhaustive-register-search",
+    "-mllvm", "-inline-enable-cost-benefit-analysis",
+    "-mllvm", "-interleave-small-loop-scalar-reduction",
+    "-mllvm", "-loop-rotate-multi",
+    "-mllvm", "-misched=ilpmax",
+    "-mllvm", "-pre-RA-sched=list-ilp",
+    "-mllvm", "-scalar-evolution-use-expensive-range-sharpening",
+    "-mllvm", "-slp-vectorize-hor-store",
+    "-mllvm", "-unroll-runtime-multi-exit",
+    "-mllvm", "-vectorizer-maximize-bandwidth",
+  ]
+
+  common_optimize_on_ldflags += [
+    "-freroll-loops",
+    "-Wl,-mllvm,-adce-remove-loops",
+    "-Wl,-mllvm,-aggressive-ext-opt",
+    "-Wl,-mllvm,-consthoist-gep",
+    "-Wl,-mllvm,-costmodel-reduxcost",
+    "-Wl,-mllvm,-enable-cse-in-irtranslator",
+    "-Wl,-mllvm,-enable-cse-in-legalizer",
+    "-Wl,-mllvm,-enable-deferred-spilling",
+    "-Wl,-mllvm,-enable-dfa-jump-thread",
+    "-Wl,-mllvm,-enable-gvn-hoist",
+    "-Wl,-mllvm,-enable-interleaved-mem-accesses",
+    "-Wl,-mllvm,-enable-masked-interleaved-mem-accesses",
+    "-Wl,-mllvm,-enable-ipra",
+    "-Wl,-mllvm,-enable-loadstore-runtime-interleave",
+    "-Wl,-mllvm,-enable-local-reassign",
+    "-Wl,-mllvm,-enable-loopinterchange",
+    "-Wl,-mllvm,-enable-loop-distribute",
+    "-Wl,-mllvm,-enable-loop-flatten",
+    "-Wl,-mllvm,-enable-loop-versioning-licm",
+    "-Wl,-mllvm,-enable-unroll-and-jam",
+    "-Wl,-mllvm,-exhaustive-register-search",
+    "-Wl,-mllvm,-inline-enable-cost-benefit-analysis",
+    "-Wl,-mllvm,-interleave-small-loop-scalar-reduction",
+    "-Wl,-mllvm,-loop-rotate-multi",
+    "-Wl,-mllvm,-misched=ilpmax",
+    "-Wl,-mllvm,-pre-RA-sched=list-ilp",
+    "-Wl,-mllvm,-scalar-evolution-use-expensive-range-sharpening",
+    "-Wl,-mllvm,-slp-vectorize-hor-store",
+    "-Wl,-mllvm,-unroll-runtime-multi-exit",
+    "-Wl,-mllvm,-vectorizer-maximize-bandwidth",
+  ]
+
   if (is_android) {
     # TODO(jdduke) Re-enable on mips after resolving linking
     # issues with libc++ (crbug.com/456380).
@@ -2379,12 +2519,12 @@ config("optimize") {
     } else {
       # PGO requires all translation units to be compiled with /O2. The actual
       # optimization level will be decided based on the profiling data.
-      cflags = [ "/O2" ] + common_optimize_on_cflags + [ "/Oi" ]
+      cflags = [ "/clang:-O3" ] + common_optimize_on_cflags + [ "/Oi" ]
 
       # https://doc.rust-lang.org/rustc/profile-guided-optimization.html#usage
       # suggests not using an explicit `-Copt-level` at all, and the default is
       # to optimize for performance like `/O2` for clang.
-      rustflags = []
+      rustflags = [ "-Copt-level=3" ]
     }
   } else if (optimize_for_size) {
     # Favor size over speed.
@@ -2417,7 +2557,7 @@ config("optimize") {
     # vectorization while otherwise optimizing for size.
     rustflags = [ "-Copt-level=s" ]
   } else {
-    cflags = [ "-O2" ] + common_optimize_on_cflags
+    cflags = [ "-O3" ] + common_optimize_on_cflags
 
     # The `-O3` for clang turns on extra optimizations compared to the standard
     # `-O2`. But for rust, `-Copt-level=3` is the default and is thus reliable
@@ -2484,11 +2624,11 @@ config("optimize_max") {
     if (is_win) {
       # Favor speed over size, /O2 must be before the common flags.
       # /O2 implies /Ot, /Oi, and /GF.
-      cflags = [ "/O2" ] + common_optimize_on_cflags
+      cflags = [ "/clang:-O3" ] + common_optimize_on_cflags + [ "/Oi" ]
     } else if (optimize_for_fuzzing) {
       cflags = [ "-O1" ] + common_optimize_on_cflags
     } else {
-      cflags = [ "-O2" ] + common_optimize_on_cflags
+      cflags = [ "-O3" ] + common_optimize_on_cflags
     }
     rustflags = [ "-Copt-level=3" ]
   }
@@ -2517,7 +2657,7 @@ config("optimize_speed") {
     if (is_win) {
       # Favor speed over size, /O2 must be before the common flags.
       # /O2 implies /Ot, /Oi, and /GF.
-      cflags = [ "/O2" ] + common_optimize_on_cflags
+      cflags = [ "/clang:-O3" ] + common_optimize_on_cflags + [ "/Oi" ]
     } else if (optimize_for_fuzzing) {
       cflags = [ "-O1" ] + common_optimize_on_cflags
     } else {
@@ -2896,7 +3036,7 @@ config("minimal_symbols") {
 # names in the final debug information.
 config("no_symbols") {
   if (is_win) {
-    ldflags = [ "/DEBUG" ]
+    ldflags = [ "/DEBUG:NONE" ]
 
     # All configs using /DEBUG should include this:
     configs = [ ":win_pdbaltpath" ]
diff --git a/build/config/win/BUILD.gn b/build/config/win/BUILD.gn
index ddcc94a2d5468..5d1a70e978f0b 100644
--- a/build/config/win/BUILD.gn
+++ b/build/config/win/BUILD.gn
@@ -127,7 +127,7 @@ config("compiler") {
     # microarchitecture. MSVC only supports a subset of architectures, and the
     # next step after SSE2 will be AVX.
     if (current_cpu == "x86" || current_cpu == "x64") {
-      cflags += [ "-msse3" ]
+      cflags += [ "/arch:AVX2", "/clang:-w", ]
     }
 
     # Enable ANSI escape codes if something emulating them is around (cmd.exe
@@ -167,6 +167,7 @@ config("compiler") {
 
     # Don't look for libpaths in %LIB%, similar to /X in cflags above.
     ldflags += [ "/lldignoreenv" ]
+
   }
 
   # Some binaries create PDBs larger than 4 GiB. Increasing the PDB page size
@@ -198,7 +199,7 @@ config("compiler") {
     if (use_lld) {
       # String tail merging leads to smaller binaries, but they don't compress
       # as well, leading to increased mini_installer size (crbug.com/838449).
-      ldflags += [ "/OPT:NOLLDTAILMERGE" ]
+      ldflags += [ "/OPT:LLDTAILMERGE" ]
     }
 
     # TODO(siggi): Is this of any use anymore?
@@ -206,7 +207,7 @@ config("compiler") {
     # PDB file by about 5%) but does not otherwise alter the output binary. It
     # is enabled opportunistically for builds where it is not prohibited (not
     # supported when incrementally linking, or using /debug:fastlink).
-    ldflags += [ "/PROFILE" ]
+    # ldflags += [ "/PROFILE" ]
   }
 
   # arflags apply only to static_libraries. The normal linker configs are only
diff --git a/chrome/tools/build/win/create_installer_archive.py b/chrome/tools/build/win/create_installer_archive.py
index 07387a69ada91..1d7832f9c22cd 100755
--- a/chrome/tools/build/win/create_installer_archive.py
+++ b/chrome/tools/build/win/create_installer_archive.py
@@ -80,21 +80,8 @@ def CompressUsingLZMA(build_dir, compressed_file, input_file, verbose, fast):
   else:
     cmd.extend(
       [
-          # Flags equivalent to -mx9 (ultra) but with the bcj2 turned on (exe
-          # pre-filter). This results in a ~2.3MB decrease in installer size on
-          # a 24MB installer.
-          # Additionally, these settings reflect a 7zip 4.42 and up change in
-          # the definition of -mx9, increasting the dicionary size moving to
-          # 26bit = 64MB. This results in an additional ~3.5MB decrease.
-          # Older 7zip versions can support these settings, as these changes
-          # rely on existing functionality in the lzma format.
-          '-m0=BCJ2',
-          '-m1=LZMA:d27:fb128',
-          '-m2=LZMA:d22:fb128:mf=bt2',
-          '-m3=LZMA:d22:fb128:mf=bt2',
-          '-mb0:1',
-          '-mb0s1:2',
-          '-mb0s2:3',
+          '-mx5',
+          '-myx=7',
       ])
   cmd.extend(
     [
diff --git a/chrome/updater/win/installer/create_installer_archive.py b/chrome/updater/win/installer/create_installer_archive.py
index fca63d47b722e..1c2d4f68c9124 100644
--- a/chrome/updater/win/installer/create_installer_archive.py
+++ b/chrome/updater/win/installer/create_installer_archive.py
@@ -42,16 +42,8 @@ def CompressUsingLZMA(build_dir, compressed_file, input_file, verbose, fast):
         cmd.append('-mx1')
     else:
         cmd.extend([
-            # Flags equivalent to -mx9 (ultra) but with the bcj2 turned on (exe
-            # pre-filter). These arguments are the similar to what the Chrome
-            # mini-installer is using.
-            '-m0=BCJ2',
-            '-m1=LZMA:d27:fb128',
-            '-m2=LZMA:d22:fb128:mf=bt2',
-            '-m3=LZMA:d22:fb128:mf=bt2',
-            '-mb0:1',
-            '-mb0s1:2',
-            '-mb0s2:3',
+            '-mx5',
+            '-myx=7',
         ])
     cmd.extend([
         os.path.abspath(compressed_file),
diff --git a/media/base/media_switches.cc b/media/base/media_switches.cc
index 694588bce864f..e0f28ae392808 100644
--- a/media/base/media_switches.cc
+++ b/media/base/media_switches.cc
@@ -347,7 +347,7 @@ BASE_FEATURE(kPlatformHEVCDecoderSupport,
 // Enables HEVC hardware accelerated encoding for Windows, Mac, and Android.
 BASE_FEATURE(kPlatformHEVCEncoderSupport,
              "PlatformHEVCEncoderSupport",
-             base::FEATURE_DISABLED_BY_DEFAULT);
+             base::FEATURE_ENABLED_BY_DEFAULT);
 #endif  // BUILDFLAG(IS_WIN) || BUILDFLAG(IS_APPLE) || BUILDFLAG(IS_ANDROID)
 #endif  // BUILDFLAG(ENABLE_PLATFORM_HEVC)
 
diff --git a/media/base/supported_types.cc b/media/base/supported_types.cc
index 7b215e0db3985..21c0d322ce924 100644
--- a/media/base/supported_types.cc
+++ b/media/base/supported_types.cc
@@ -216,33 +216,7 @@ bool IsAudioCodecProprietary(AudioCodec codec) {
 #endif  // !BUILDFLAG(USE_PROPRIETARY_CODECS)
 
 bool IsHevcProfileSupported(const VideoType& type) {
-  if (!IsColorSpaceSupported(type.color_space))
-    return false;
-
-#if BUILDFLAG(ENABLE_PLATFORM_HEVC)
-#if BUILDFLAG(PLATFORM_HAS_OPTIONAL_HEVC_SUPPORT)
-#if BUILDFLAG(IS_CHROMEOS_LACROS)
-  // TODO(b/171813538): For Lacros, the supplemental profile cache will be
-  // asking lacros-gpu, but we will be doing decoding in ash-gpu. Until the
-  // codec detection is plumbed through to ash-gpu we can do this extra check
-  // for HEVC support.
-  if (base::CommandLine::ForCurrentProcess()->HasSwitch(
-          switches::kLacrosEnablePlatformHevc)) {
-    return true;
-  }
-#endif  // BUILDFLAG(IS_CHROMEOS_LACROS)
-#if BUILDFLAG(IS_CHROMEOS_ASH)
-  if (!base::FeatureList::IsEnabled(kPlatformHEVCDecoderSupport)) {
-    return false;
-  }
-#endif  // BUILDFLAG(IS_CHROMEOS_ASH)
-  return GetSupplementalProfileCache()->IsProfileSupported(type.profile);
-#else
   return true;
-#endif  // BUIDFLAG(PLATFORM_HAS_OPTIONAL_HEVC_SUPPORT)
-#else
-  return false;
-#endif  // BUILDFLAG(ENABLE_PLATFORM_HEVC)
 }
 
 bool IsVp9ProfileSupported(const VideoType& type) {
@@ -427,7 +401,7 @@ bool IsBuiltInVideoCodec(VideoCodec codec) {
   if (codec == VideoCodec::kVP8)
     return true;
 #if BUILDFLAG(USE_PROPRIETARY_CODECS)
-  if (codec == VideoCodec::kH264)
+  if (codec == VideoCodec::kH264 || codec == VideoCodec::kHEVC)
     return true;
 #endif  // BUILDFLAG(USE_PROPRIETARY_CODECS)
 #endif  // BUILDFLAG(ENABLE_FFMPEG_VIDEO_DECODERS)
diff --git a/media/filters/ffmpeg_video_decoder.cc b/media/filters/ffmpeg_video_decoder.cc
index aaab17bdc3b9c..1ea4fdf3408a2 100644
--- a/media/filters/ffmpeg_video_decoder.cc
+++ b/media/filters/ffmpeg_video_decoder.cc
@@ -76,7 +76,6 @@ static int GetFFmpegVideoDecoderThreadCount(const VideoDecoderConfig& config) {
     case VideoCodec::kUnknown:
     case VideoCodec::kVC1:
     case VideoCodec::kMPEG2:
-    case VideoCodec::kHEVC:
     case VideoCodec::kVP9:
     case VideoCodec::kAV1:
     case VideoCodec::kDolbyVision:
@@ -88,6 +87,7 @@ static int GetFFmpegVideoDecoderThreadCount(const VideoDecoderConfig& config) {
       // No extra threads for these codecs.
       break;
 
+    case VideoCodec::kHEVC:
     case VideoCodec::kH264:
     case VideoCodec::kVP8:
       // Normalize to three threads for 1080p content, then scale linearly
diff --git a/third_party/blink/renderer/core/css/properties/longhands/longhands_custom.cc b/third_party/blink/renderer/core/css/properties/longhands/longhands_custom.cc
index d719925adbf10..4238aba0f1501 100644
--- a/third_party/blink/renderer/core/css/properties/longhands/longhands_custom.cc
+++ b/third_party/blink/renderer/core/css/properties/longhands/longhands_custom.cc
@@ -9519,7 +9519,7 @@ const CSSValue* MaskSize::CSSValueFromComputedStyleInternal(
     const ComputedStyle& style,
     const LayoutObject*,
     bool allow_visited_style) const {
-  CHECK(RuntimeEnabledFeatures::CSSMaskingInteropEnabled());
+  // CHECK(RuntimeEnabledFeatures::CSSMaskingInteropEnabled());
   const FillLayer& fill_layer = style.MaskLayers();
   return ComputedStyleUtils::BackgroundImageOrWebkitMaskSize(style, fill_layer);
 }
diff --git a/tools/cfi/ignores.txt b/tools/cfi/ignores.txt
index 73080483ab32b..9304584dedea4 100644
--- a/tools/cfi/ignores.txt
+++ b/tools/cfi/ignores.txt
@@ -144,6 +144,8 @@ type:sandbox::TargetServices
 
 [cfi-icall]
 
+fun:ft_size_reset_iterator
+
 ######### Cross-DSO icalls using dynamically resolved symbols crbug.com/771365
 
 # ANGLE
